# Отчет о ручном тестировании UI Manual Trading

## Окружение

- Приложение: `apps/manual-trading` (Vite dev server, порт 5174)
- Браузер: Playwright Chromium, viewport 1280x900
- Данные: встроенный мок (исторический поток, переключение на Realtime для проверки)

## Выполнение тестов по плану

| Блок плана                           | Действия                                                                                                                                                                                                                                                 | Результат                                                                        |
| ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| Создание ордеров (market/limit/stop) | Market buy 0.5 ETH/USDT → статус «исполнен», уведомление «Рыночный ордер исполнен по лучшей цене». Limit sell 0.2 @ 2900 и Stop buy 0.1 @ 2800 добавлены в таблицы ордеров с корректными ценами/сторонами.                                               | ✅ Основные типы отрабатывают, записи появляются в истории и «Активных ордерах». |
| Валидации формы                      | При размере 0 отображается tooltip браузера «Value must be greater than or equal to 0.01», отправка блокируется. Для заведомо дорогого Market-ордера (notional выше баланса) показывается блок ошибок «Недостаточно средств» + баннер «Ошибка отправки». | ⚠️ Ошибки показываются, но кнопка отправки остаётся активной (см. баг ниже).     |
| Баланс/лимиты                        | Изменение стартового баланса на 15 000 USDT применяется, расчёт «Доступно» и notional обновляется при вводе размера/цены. При недостатке средств появляется предупреждение.                                                                              | ✅ Значения пересчитываются динамически.                                         |
| Обновление рыночных данных           | Переключение табов инструментов меняет тикер, ленту сделок, стакан и мини‑график.                                                                                                                                                                        | ✅ Данные обновляются при смене инструмента.                                     |
| История и активные ордера            | После отправки заявки записи появляются в блоках «История действий» и «Активные ордера» с корректными статусами (filled/active).                                                                                                                         | ✅ Таблицы заполняются, статусы отображаются.                                    |
| Отмена ордеров                       | Кнопка «Отменить» переводит активный ордер в статус cancelled и удаляет его из блока активных.                                                                                                                                                           | ✅ Статус и счётчики обновляются.                                                |
| UX/доступность (частично)            | Формы и таблицы доступны с клавиатуры; фокус/hover стили присутствуют. Подписи и лейблы соответствуют полям.                                                                                                                                             | ✅ Критичных проблем навигации не выявлено.                                      |

## Найденные проблемы

1. **Дублирующиеся кнопки отправки в форме ордера.** После серии отправок (market → limit → stop) и попытки отправить заявку с размером `0` в форме остаются два CTA: кнопка со статусом «Отправлена» и основная «Разместить ордер». Они расположены одна под другой рядом с тултипом валидации, что создаёт конфликт визуальных акцентов и непонятно, какая кнопка актуальна. Скриншот: ![Дублирование кнопок отправки](browser:/invocations/flzanmwa/artifacts/artifacts/manual-trading/repro-actions.png)

## Итог

Большинство сценариев из плана выполняются корректно: создание и отображение ордеров, обновление данных по инструментам, пересчёт notional/баланса и отмена работают ожидаемо. Основная UX‑проблема — сохранение старой кнопки «Отправлена» в форме после нескольких заявок и ошибки валидации; требуется устранить дублирование CTA в блоке отправки ордера.
