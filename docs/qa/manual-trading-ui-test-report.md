# Отчет о ручном тестировании UI Manual Trading

## Окружение

- Приложение: `apps/manual-trading` (Vite dev server, порт 5174)
- Браузер: Playwright Chromium (viewport: 1280×900, 1024×900, 768×900)
- Данные: встроенный мок (исторический поток, переключение на Realtime для проверки)

## Выполнение тестов по плану

| Блок плана                           | Действия                                                                                  | Результат                                                                                                                              |
| ------------------------------------ | ----------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| Создание ордеров (market/limit/stop) | Выполнил последовательность: Market BUY 0.5, Limit BUY 0.25 @ 64 850, Stop BUY 5 @ 2 850. | ✅ Все типы принимаются, заявки появляются в блоках «Активные ордера»/истории.                                                         |
| Валидации формы                      | Попытался отправить ордер с размером `0` и Stop-типом.                                    | ⚠️ Появляется браузерный tooltip и блок ошибок, но кнопка отправки остаётся активной; подсказки перекрывают метрики notional/доступно. |
| Баланс и лимиты                      | Проверил пересчёт доступного баланса/notional при изменении размера и цены.               | ✅ Значения обновляются динамически.                                                                                                   |
| Обновление рыночных данных           | Переключал инструменты в тикер-табах.                                                     | ✅ Котировки/стакан/график обновляются под выбранный инструмент.                                                                       |
| История и активные ордера            | После отправок ордера фиксируются в «История действий» и «Активные ордера».               | ✅ Статусы active/filled отображаются.                                                                                                 |
| Отмена ордеров                       | Проверил отмену для активной заявки.                                                      | ✅ Ордер уходит из списка активных, статус меняется на cancelled.                                                                      |
| Уведомления/ошибки                   | При ошибке валидации отображаются inline-блоки «Ошибка отправки» и список причин.         | ⚠️ Сообщения накладываются на блок расчётов, ухудшая читаемость.                                                                       |
| UX/доступность (адаптив)             | Проверил навигацию табами, ховер/фокус, а также перестройку при 1024px/768px.             | ⚠️ На узких экранах элементы накладываются (см. проблемы ниже).                                                                        |
| Интеграция котировок                 | Проверил реакцию notional/PNL на изменения цены и переключение потоков.                   | ✅ Пересчёт происходит, отображаются таймстемпы последнего обновления.                                                                 |
| Edge/нагрузка                        | Быстрая последовательность из трёх ордеров (burst) + валидация на 0.                      | ⚠️ UI выдержал без зависаний, но ошибки накладываются на поля.                                                                         |

## Найденные проблемы

1. **Кнопка «Подключиться» перекрывает таб «Исторические» и часть контролов режима данных (1280px).** На стартовом экране зелёная кнопка налезает на таб выбора источника данных и перекрывает текст, из-за чего непонятно, какая вкладка активна и куда кликать. Скриншот: ![Перекрытие таба режимов данных](browser:/invocations/oymcjzwd/artifacts/artifacts/manual-trading/top-1280.png)
2. **При ширине 768px кнопки стартового баланса накладываются на поле ввода и соседние CTA.** В блоке «Стартовый баланс» кнопка «Подключиться» заходит на инпут, а «Симулировать обрыв»/«Вернуть поток» стоят без отступов и разъезжаются за пределы контейнера. Скриншот: ![Наложение кнопок стартового баланса](browser:/invocations/bpigtkum/artifacts/artifacts/manual-trading/768.png)
3. **Ошибки валидации перекрывают метрики и кнопку отправки ордера.** При попытке отправить стоп-ордер с размером 0 браузерный tooltip, блок «Проверьте заполнение формы» и предупреждение об ошибке накладываются на строку с notional/доступно и вплотную примыкают к CTA, затрудняя чтение. Скриншот: ![Наслоение подсказок и ошибок в форме ордера](browser:/invocations/kupgcyou/artifacts/artifacts/manual-trading/cta-duplication.png)

## Итог

Функциональные сценарии создания/отмены ордеров и обновления котировок работают, однако критичны проблемы верстки: перекрытие элементов в шапке и блоке стартового баланса, а также наложение ошибок на ключевые расчёты и CTA при невалидных данных. Требуется переразметка контейнеров и отступов для режимов данных и стартового баланса, а также корректное позиционирование ошибок в форме ордера.
