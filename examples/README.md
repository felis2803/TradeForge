# TradeForge Examples

Этот каталог содержит заготовки CLI/SDK-сценариев поверх симулятора TradeForge. В этом PR реализованы только инфраструктура и общие утилиты — сами сценарии будут развиваться в отдельных папках (`01-..`, `02-..` и т.д.).

## Быстрый старт

```bash
pnpm install
pnpm -w build
pnpm examples:build
pnpm examples:lint
pnpm examples:run 01-basic-replay
```

Команда `examples:run` ожидает предварительную сборку (`pnpm examples:build`) и пытается запустить собранный файл `dist-examples/<scenario>/run.js`. Пока сценарий ещё не реализован, скрипт выполнит дымовой пример из `_smoke/smoke.ts` и выведет `SMOKE_OK`.

### Переменные окружения

- `TF_TRADES_FILES` — список (через запятую) файлов/глобов с трейдами (`*.jsonl`, `*.jsonl.gz`, `*.jsonl.zip`).
- `TF_DEPTH_FILES` — список файлов/глобов с обновлениями стакана (`*.jsonl`, `*.jsonl.gz`, `*.jsonl.zip`).
- `TF_CP_PATH` — путь для автосохранения чекпоинтов (если указан в сценарии).
- `TF_TIE_BREAK` — стратегия разбора одинаковых меток времени (`DEPTH` или `TRADES`).
- `TF_TIME_FROM`, `TF_TIME_TO` — фильтрация данных по времени (миллисекунды или ISO-строки).
- `TF_VERBOSE` — `1` для подробных логов, `0` для стандартного режима.
- `TF_QUIET` — `1` чтобы скрыть информационные сообщения.

Больше подробностей о фикстурах и переменных окружения — в [`_shared/fixtures/README.md`](./_shared/fixtures/README.md).

## Директории

- [`_shared`](./_shared) — общие утилиты (ридеры, merge, логирование, чекпоинты, CLI-скрипты).
- [`_templates`](./_templates) — шаблоны README и SDK-скриптов для новых сценариев.
- [`_smoke`](./_smoke) — минимальные фикстуры и дымовой тест, используемый в CI.
- `01-..` … `08-..` — каталоги сценариев. Каждый из них содержит TODO и будет пополняться в отдельных PR.

## Сценарии

| Каталог                     | Статус | Краткое описание                                             |
| --------------------------- | ------ | ------------------------------------------------------------ |
| `01-basic-replay`           | TODO   | Минимальный запуск реплея с трейдами и стаканом.             |
| `02-limits-and-speed`       | TODO   | Демонстрация лимитов по событиям/времени и ускоренного часа. |
| `03-accounts-and-orders`    | TODO   | Пример открытия аккаунтов и базовых ордеров.                 |
| `04-stop-orders`            | TODO   | Работа со стоп-ордером и активацией триггеров.               |
| `05-pause-auto-checkpoint`  | TODO   | Приостановка воспроизведения и автосейвы чекпоинтов.         |
| `06-resume-from-checkpoint` | TODO   | Восстановление состояния из чекпоинта.                       |
| `07-summary-and-ndjson`     | TODO   | Выгрузка итогов и поток NDJSON.                              |
| `08-rest-mini`              | TODO   | Минимальный REST-сценарий поверх SDK.                        |

## Дальнейшие шаги

1. Скопируйте нужный шаблон из [`_templates`](./_templates).
2. Добавьте собственные фикстуры (можно положить их в `_shared/fixtures` или подключить через переменные окружения).
3. Реализуйте сценарий и обновите README в соответствующей папке.
4. Убедитесь, что `pnpm examples:build` и `pnpm examples:run <scenario>` отрабатывают локально.

Каждый сценарий может жить в своём каталоге без правок в остальных частях репозитория.
